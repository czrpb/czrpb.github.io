---
marp: true
size: 16:9
theme: uncover
class: invert
paginate: true
math: katex
style: |
  @import 'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/fontawesome.min.css';
  @import 'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/solid.min.css';

  section {
    font-size: 20pt;
  }

  a {
    font-size: 13pt;
  }

  .small-size {
    font-size: 8pt;
    margin: 0px;
    padding: 0px;
  }

  ul li ul li {
    font-size: 16pt;
  }

  footer {
    left: auto;
    right: auto;
    top: auto;
    bottom: auto;

    right: 20px;
    top: 20px;
  }
---

# Decorators 102: Dynamic Decorators

Quentin Crain

---

## Agenda

- Review
- Decorator Arguments
- Wrapped Function's Arguments
- Icons
    - <span class="fa-solid fa-brain"> More Education!</span>
    - <span class="fa-solid fa-laptop-code"> Practical Learning!</span>
    - <span class="fa-solid fa-virus-covid"> Bug!</span>

---

### REVIEW

```python
def div_by(x):
    def wrapper(num):
        return num / x
    return wrapper
    
>>> div_by_2 = div_by(2)
>>> div_by_5 = div_by(5)
>>> div_by_2(div_by_5(100))
10.0
>>> div_by_0 = div_by(0)
>>> div_by_0(4)
Traceback (most recent call last):
  File "<python-input-10>", line 1, in <module>
    div_by_0(4)
    ~~~~~~~~^^^
  File "<python-input-4>", line 3, in wrapper
    return num / x
           ~~~~^~~
ZeroDivisionError: division by zero
```

- 1st Class
- Closure

---

### `div_by` as Decorator

<table width="100%">
<tr><td width="50%">

```python
from random import randint

def div_by_2(func):
    def wrapper():
        return func() / 2
    return wrapper

@div_by_2
def random():
    return randint(0, 10)

random()
```

</td><td>

```python
from random import randint

def div_by(func, x=2):
    def wrapper():
        return func() / x
    return wrapper

@div_by
def random():
    return randint(0, 10)

random()
```

</td></tr>
</table>

---

### Oh no!

<table width="100%">
<tr><td width="50%">

```python
from random import randint

def div_by(func, x=2):
    def wrapper():
        return func() / x
    return wrapper

@div_by
def random():
    return randint(0, 10)

random()
```

</td><td width="50%">

```python
@div_by(5)
def random():
    return randint(0, 10)

Traceback (most recent call last):
  File "<python-input-1>", line 1, in <module>
    @div_by(5)
     ~~~~~~^^^
TypeError: div_by.<locals>.wrapper() takes
0 positional arguments but 1 was given
```

</td></tr>
</table>

---

### Decorators with Arguments

```python
from random import randint

def div_by(x):
    def the_decorator(func):
        def wrapper():
            return func() / x
        return wrapper
    return the_decorator

@div_by(2)
def random():
    return randint(0, 10)

random()
```

---

### Wrapped Function's Arguments - Ack!

<table width="100%">
<tr><td width="50%">

```python
from random import randint

def div_by(x):
    def the_decorator(func):
        def wrapper():
            return func() / x
        return wrapper
    return the_decorator

@div_by(2)
def random(start, end):
    return randint(start, end)
    
random(10, 20)
```

</td><td width="50%">

```python
from random import randint

def div_by(x):
    def the_decorator(func):
        def wrapper(start, end):
            return func(start, end) / x
        return wrapper
    return the_decorator

@div_by(2)
def random(start=0, end=10):
    return randint(start, end)

random()
```

</td></tr>
</table>

---

### Wrapped Function's Arguments cont.

```python
from random import randint

def div_by(x):
    def the_decorator(func):
        def wrapper(*args, **kwargs):
            return func(*args, **kwargs) / x
        return wrapper
    return the_decorator

@div_by(2)
def random(start=0, end=10):
    return randint(start, end)

random(1000, 2000)
```

---

### Lab 1: Function Timing

---

### Lab 2: Type Checking

---

# END

---
